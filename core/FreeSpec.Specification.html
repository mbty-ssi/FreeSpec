<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>FreeSpec.Specification</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library FreeSpec.Specification</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Program.Basics.html#"><span class="id" title="library">Coq.Program.Basics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Program.Equality.html#"><span class="id" title="library">Coq.Program.Equality</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Setoids.Setoid.html#"><span class="id" title="library">Coq.Setoids.Setoid</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Logic.Classical.html#"><span class="id" title="library">Coq.Logic.Classical</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Prelude.Equality</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Prelude.Tactics</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="FreeSpec.Program.html#"><span class="id" title="library">FreeSpec.Program</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="FreeSpec.Semantics.html#"><span class="id" title="library">FreeSpec.Semantics</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this library, we provide an alternative to <span class="inlinecode"><a class="idref" href="FreeSpec.Program.html#runProgram"><span class="id" title="definition">runProgram</span></a></span> we can
    use to derive a so-called abstract state through the executed
    effects of the underlying <span class="inlinecode"><a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a></span>. Using this feature, we can
    verify some properties of a given <span class="inlinecode"><a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a></span> <i>without modifying
    it</i>. 
<div class="paragraph"> </div>

<a name="lab13"></a><h1 class="section">Witness State and Instrumented Execution</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="def"><span class="id" title="section">def</span></a>.<br/>
<span class="id" title="keyword">Variables</span> (<a name="def.W"><span class="id" title="variable">W</span></a>: <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a name="def.I"><span class="id" title="variable">I</span></a>: <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a name="def.abs_step"><span class="id" title="variable">abs_step</span></a>:  <span class="id" title="keyword">∀</span> (<span class="id" title="var">R</span>:<span class="id" title="keyword">Type</span>), <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="runInstrumentedProgram"><span class="id" title="definition">runInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:         <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:         <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:       <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:         <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Semantics.html#Sem.result"><span class="id" title="inductive">Sem.result</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> (<a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="FreeSpec.Program.html#Pure"><span class="id" title="constructor">Pure</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒ <a class="idref" href="FreeSpec.Semantics.html#Sem.mkRes"><span class="id" title="constructor">Sem.mkRes</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="FreeSpec.Program.html#Request"><span class="id" title="constructor">Request</span></a> <span class="id" title="var">e</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒ <a class="idref" href="FreeSpec.Specification.html#runInstrumentedProgram"><span class="id" title="definition">runInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#def.abs_step"><span class="id" title="variable">abs_step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e</span> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <span class="id" title="var">e</span>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Semantics.html#execEffect"><span class="id" title="definition">execEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <span class="id" title="var">e</span>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="runInstrumentedProgram_equation_2"><span class="id" title="lemma">runInstrumentedProgram_equation_2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>: <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>: <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>: <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>: <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#runInstrumentedProgram"><span class="id" title="definition">runInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> (<a class="idref" href="FreeSpec.Program.html#Request"><span class="id" title="constructor">Request</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Specification.html#runInstrumentedProgram"><span class="id" title="definition">runInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#def.abs_step"><span class="id" title="variable">abs_step</span></a> <span class="id" title="var">_</span> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Semantics.html#execEffect"><span class="id" title="definition">execEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Similary to <span class="inlinecode"><span class="id" title="var">FreeSpec.Program.runProgram</span></span>, we define several
    helpers functions to select one element among the three that are
    returned by <span class="inlinecode"><span class="id" title="var">abstractRun</span></span>.
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="execInstrumentedProgram"><span class="id" title="definition">execInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:         <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:         <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:       <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:         <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="FreeSpec.Semantics.html#Sem.next"><span class="id" title="definition">Sem.next</span></a> (<a class="idref" href="FreeSpec.Specification.html#runInstrumentedProgram"><span class="id" title="definition">runInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="execInstrumentedProgram_equation_2"><span class="id" title="lemma">execInstrumentedProgram_equation_2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>: <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>: <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>: <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>: <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#execInstrumentedProgram"><span class="id" title="definition">execInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> (<a class="idref" href="FreeSpec.Program.html#Request"><span class="id" title="constructor">Request</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Specification.html#execInstrumentedProgram"><span class="id" title="definition">execInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#def.abs_step"><span class="id" title="variable">abs_step</span></a> <span class="id" title="var">_</span> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Semantics.html#execEffect"><span class="id" title="definition">execEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="exec_instrumented_exec_same"><span class="id" title="lemma">exec_instrumented_exec_same</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:         <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:         <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:       <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:         <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#execInstrumentedProgram"><span class="id" title="definition">execInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Program.html#execProgram"><span class="id" title="definition">execProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Specification.html#execInstrumentedProgram_equation_2"><span class="id" title="lemma">execInstrumentedProgram_equation_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="evalInstrumentedProgram"><span class="id" title="definition">evalInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:         <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:         <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:       <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:         <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="FreeSpec.Semantics.html#Sem.res"><span class="id" title="definition">Sem.res</span></a> (<a class="idref" href="FreeSpec.Specification.html#runInstrumentedProgram"><span class="id" title="definition">runInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="evalInstrumentedProgram_equation_2"><span class="id" title="lemma">evalInstrumentedProgram_equation_2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>: <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>: <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>: <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>: <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#evalInstrumentedProgram"><span class="id" title="definition">evalInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> (<a class="idref" href="FreeSpec.Program.html#Request"><span class="id" title="constructor">Request</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Specification.html#evalInstrumentedProgram"><span class="id" title="definition">evalInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#def.abs_step"><span class="id" title="variable">abs_step</span></a> <span class="id" title="var">_</span> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Semantics.html#execEffect"><span class="id" title="definition">execEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eval_instrumented_eval_same"><span class="id" title="lemma">eval_instrumented_eval_same</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:         <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:         <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:       <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:         <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#evalInstrumentedProgram"><span class="id" title="definition">evalInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Program.html#evalProgram"><span class="id" title="definition">evalProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Specification.html#evalInstrumentedProgram_equation_2"><span class="id" title="lemma">evalInstrumentedProgram_equation_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="witnessInstrumentedProgram"><span class="id" title="definition">witnessInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:        <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:        <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:      <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:        <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="FreeSpec.Semantics.html#Sem.res"><span class="id" title="definition">Sem.res</span></a> (<a class="idref" href="FreeSpec.Specification.html#runInstrumentedProgram"><span class="id" title="definition">runInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="witnessInstrumentedProgram_equation_2"><span class="id" title="lemma">witnessInstrumentedProgram_equation_2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span>:      <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:        <a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:      <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:        <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>:        <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#witnessInstrumentedProgram"><span class="id" title="definition">witnessInstrumentedProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> (<a class="idref" href="FreeSpec.Program.html#Request"><span class="id" title="constructor">Request</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Specification.html#witnessInstrumentedProgram"><span class="id" title="definition">witnessInstrumentedProgram</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#def.abs_step"><span class="id" title="variable">abs_step</span></a> <span class="id" title="var">_</span> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Semantics.html#execEffect"><span class="id" title="definition">execEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A</span>: <span class="id" title="keyword">Type</span>) `{<span class="id" title="class">Equality</span> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>}<br/>
&nbsp;&nbsp;: (<a class="idref" href="FreeSpec.Specification.html#witnessInstrumentedProgram"><span class="id" title="definition">witnessInstrumentedProgram</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a>@<span class="id" title="method">equal</span> (<a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a>) <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a>@<span class="id" title="method">equal</span> (<a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">derive_abstraction_morphism</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">sig'</span> <span class="id" title="var">Heq_sig</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">Heq_p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_p</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">sig'</span> <span class="id" title="var">Heq_sig</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">sig'</span> [<span class="id" title="var">Heq_1</span> <span class="id" title="var">Heq_2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Specification.html#witnessInstrumentedProgram_equation_2"><span class="id" title="lemma">witnessInstrumentedProgram_equation_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq_1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Heq_2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="FreeSpec.Specification.html#def"><span class="id" title="section">def</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#runInstrumentedProgram"><span class="id" title="definition">runInstrumentedProgram</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">abs_step</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#evalInstrumentedProgram"><span class="id" title="definition">evalInstrumentedProgram</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">abs_step</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#execInstrumentedProgram"><span class="id" title="definition">execInstrumentedProgram</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">abs_step</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#witnessInstrumentedProgram"><span class="id" title="definition">witnessInstrumentedProgram</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">abs_step</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#exec_instrumented_exec_same"><span class="id" title="lemma">exec_instrumented_exec_same</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">abs_step</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#eval_instrumented_eval_same"><span class="id" title="lemma">eval_instrumented_eval_same</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">abs_step</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab14"></a><h1 class="section">Abstract Specification</h1>


<div class="paragraph"> </div>

    An Abstract Specification allows for defining an expected
    behaviour for an <span class="inlinecode"><a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a></span> operational <span class="inlinecode"><span class="id" title="library">Semantics</span></span>. This
    behaviour is expressed with two complementary predicates:

<div class="paragraph"> </div>

<ul class="doclist">
<li> The <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a></span> an <span class="inlinecode"><a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a></span> user has to enforce

</li>
<li> The <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#postcondition"><span class="id" title="projection">postcondition</span></a></span> a <span class="inlinecode"><span class="id" title="library">Semantics</span></span> has to enforce in return

</li>
</ul>

<div class="paragraph"> </div>

    These predicates are tied to an abstract state. This abstract
    state is modified by the <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a></span> function through the
    execution (see <span class="inlinecode"><span class="id" title="var">abstractRun</span></span> for more information about that). 
</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a name="Specification"><span class="id" title="record">Specification</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">W</span>:  <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span>:  <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a name="abstract_step"><span class="id" title="projection">abstract_step</span></a> (<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:  <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span>:  <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a name="precondition"><span class="id" title="projection">precondition</span></a> (<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a name="postcondition"><span class="id" title="projection">postcondition</span></a> (<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">_</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">e</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">_</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">e</span> <span class="id" title="var">w</span>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="FreeSpec.Specification.html#postcondition"><span class="id" title="projection">postcondition</span></a> [<span class="id" title="var">W</span> <span class="id" title="var">I</span>] (<span class="id" title="var">_</span>) [<span class="id" title="var">A</span>] (<span class="id" title="var">e</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="no_pre"><span class="id" title="definition">no_pre</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:  <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:  <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:  <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="specification_derive"><span class="id" title="definition">specification_derive</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:    <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:    <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:    <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:    <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:  <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:    <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:    <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#witnessInstrumentedProgram"><span class="id" title="definition">witnessInstrumentedProgram</span></a> (<a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a name="specification_derives_pure_eq"><span class="id" title="lemma">specification_derives_pure_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:    <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:    <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:    <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span>:    <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:  <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:    <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:    <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#specification_derive"><span class="id" title="definition">specification_derive</span></a> (<a class="idref" href="FreeSpec.Program.html#Pure"><span class="id" title="constructor">Pure</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a name="specification_derives_request_eq"><span class="id" title="lemma">specification_derives_request_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">W</span>:    <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span>:    <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A</span> <span class="id" title="var">B</span>:  <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:    <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>:    <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:  <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:    <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:    <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#specification_derive"><span class="id" title="definition">specification_derive</span></a> (<a class="idref" href="FreeSpec.Program.html#Request"><span class="id" title="constructor">Request</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Specification.html#specification_derive"><span class="id" title="definition">specification_derive</span></a> (<a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Semantics.html#execEffect"><span class="id" title="definition">execEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab15"></a><h2 class="section">Specification Compliance</h2>


<div class="paragraph"> </div>

    A <span class="inlinecode"><span class="id" title="library">Semantics</span></span> complies with a given abstract <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a></span> <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a></span>
    (i.e. it is a <span class="inlinecode"><span class="id" title="var">compliante</span></span> <span class="inlinecode"><span class="id" title="var">semantics</span></span>) if, for every effect which
    satisfies the <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a></span>, it computes a result which satisfies
    the <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#postcondition"><span class="id" title="projection">postcondition</span></a></span>.

<div class="paragraph"> </div>

    The abstract Specification is parameterized by an abstract state
    and, by definition, if a <span class="inlinecode"><span class="id" title="library">Semantics</span></span> complies with a
    <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a></span> <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a></span> in accordance with a given abstract state and
    executes an effect which satisfies the precondition, then the
    resulting operational Semantics complies with <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a></span> in accordance
    with the new abstract state computed with the <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a></span>
    function. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">CoInductive</span> <a name="compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:    <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:    <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:    <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:    <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:  <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="enforced"><span class="id" title="constructor">enforced</span></a> (<span class="id" title="var">Hprom</span>: <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:  <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#postcondition"><span class="id" title="projection">postcondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Henf</span>:  <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:  <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Semantics.html#execEffect"><span class="id" title="definition">execEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">&quot;</span></a>sig '|=' c '[' w ']'" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> <span class="id" title="var">c</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60).<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <a name="compliant_enforces_postcondition"><span class="id" title="lemma">compliant_enforces_postcondition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">W</span>:     <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span>:     <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A</span>:     <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:     <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:   <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:     <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:     <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Henf</span>:  <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">|=</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hreq</span>:  <a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#postcondition"><span class="id" title="projection">postcondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Semantics.html#evalEffect"><span class="id" title="definition">evalEffect</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Henf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hprom</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab16"></a><h2 class="section">Compliant Stateful Semantics</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="specification_preserves_inv"><span class="id" title="definition">specification_preserves_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:     <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">S</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:     <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">inv</span>:   <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">step</span>:  @<a class="idref" href="FreeSpec.Semantics.html#PS"><span class="id" title="definition">PS</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">∀</span> (<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:  <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:  <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:  <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> (<a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="specification_enforces_postcondition"><span class="id" title="definition">specification_enforces_postcondition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:     <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">S</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:     <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">inv</span>:   <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">step</span>:  @<a class="idref" href="FreeSpec.Semantics.html#PS"><span class="id" title="definition">PS</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">∀</span> (<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:  <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:  <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:  <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#postcondition"><span class="id" title="projection">postcondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a>)) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a name="_stateful_specification_enforcement"><span class="id" title="lemma">_stateful_specification_enforcement</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:     <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">S</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:     <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">inv</span>:   <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">step</span>:  @<a class="idref" href="FreeSpec.Semantics.html#PS"><span class="id" title="definition">PS</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> (<span class="id" title="var">w</span>:      <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hpres</span>:  <a class="idref" href="FreeSpec.Specification.html#specification_preserves_inv"><span class="id" title="definition">specification_preserves_inv</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Henf</span>:   <a class="idref" href="FreeSpec.Specification.html#specification_enforces_postcondition"><span class="id" title="definition">specification_enforces_postcondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:      <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Semantics.html#mkSemantics"><span class="id" title="definition">mkSemantics</span></a> <a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">|=</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">_stateful_specification_enforcement</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hpres</span> <span class="id" title="var">Henf</span> <span class="id" title="var">s</span> <span class="id" title="var">Hinv</span> .<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">Hreq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Specification.html#specification_enforces_postcondition"><span class="id" title="definition">specification_enforces_postcondition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Henf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Henf</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span> <span class="id" title="var">w</span> <span class="id" title="var">Hinv</span> <span class="id" title="var">Hreq</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">Hreq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">_stateful_specification_enforcement</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span>  <span class="id" title="var">Hpres</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span>  <span class="id" title="var">Henf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hpres</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="stateful_specification_enforcement"><span class="id" title="lemma">stateful_specification_enforcement</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:     <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">S</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:     <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:     <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">inv</span>:   <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">step</span>:  @<a class="idref" href="FreeSpec.Semantics.html#PS"><span class="id" title="definition">PS</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hpres</span>: <a class="idref" href="FreeSpec.Specification.html#specification_preserves_inv"><span class="id" title="definition">specification_preserves_inv</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Henf</span>:  <a class="idref" href="FreeSpec.Specification.html#specification_enforces_postcondition"><span class="id" title="definition">specification_enforces_postcondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> (<span class="id" title="var">s</span>: <a class="idref" href="FreeSpec.Specification.html#S"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Semantics.html#mkSemantics"><span class="id" title="definition">mkSemantics</span></a> <a class="idref" href="FreeSpec.Specification.html#step"><span class="id" title="variable">step</span></a> <a class="idref" href="FreeSpec.Specification.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">|=</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="FreeSpec.Specification.html#_stateful_specification_enforcement"><span class="id" title="lemma">_stateful_specification_enforcement</span></a> <span class="id" title="var">c</span> <span class="id" title="var">inv</span> <span class="id" title="var">step</span> <span class="id" title="var">w</span> <span class="id" title="var">Hpres</span> <span class="id" title="var">Henf</span> <span class="id" title="var">s</span> <span class="id" title="var">Hinv</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab17"></a><h1 class="section">Correct Program</h1>


<div class="paragraph"> </div>

    In a nutshell, a given <span class="inlinecode"><a class="idref" href="FreeSpec.Program.html#p"><span class="id" title="variable">p</span></a>:</span> <span class="inlinecode"><a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a></span> <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a></span> <span class="inlinecode"><a class="idref" href="FreeSpec.Interface.html#A"><span class="id" title="variable">A</span></a></span> is said correct with
    respect to a given abstract <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a></span> <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a></span> if, given a
    semantics for <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#def.I"><span class="id" title="variable">I</span></a></span> which complies with <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a></span> in accordance with <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>:</span>
    <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#def.W"><span class="id" title="variable">W</span></a></span>, <span class="inlinecode"><a class="idref" href="FreeSpec.Program.html#p"><span class="id" title="variable">p</span></a></span> only uses effects which satisfy the precondition. 
<div class="paragraph"> </div>

<a name="lab18"></a><h2 class="section">Definition</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="correct_program"><span class="id" title="inductive">correct_program</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:  <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:  <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:  <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>}, <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <span class="id" title="var">I</span> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="compliant_pure"><span class="id" title="constructor">compliant_pure</span></a> {<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span>:  <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#correct_program"><span class="id" title="inductive">correct_program</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> (<a class="idref" href="FreeSpec.Program.html#Pure"><span class="id" title="constructor">Pure</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a>)<br/>
| <a name="compliant_request"><span class="id" title="constructor">compliant_request</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>:   <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:     <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>:     <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hreq</span>:  <a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hnext</span>:  <span class="id" title="keyword">∀</span> (<span class="id" title="var">x</span>:    <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hpost</span>: <a class="idref" href="FreeSpec.Specification.html#postcondition"><span class="id" title="projection">postcondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#correct_program"><span class="id" title="inductive">correct_program</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#correct_program"><span class="id" title="inductive">correct_program</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> (<a class="idref" href="FreeSpec.Program.html#Request"><span class="id" title="constructor">Request</span></a> <a class="idref" href="FreeSpec.Specification.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">&quot;</span></a>p '|&gt;' c '[' w ']'" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#correct_program"><span class="id" title="inductive">correct_program</span></a> <span class="id" title="var">c</span> <span class="id" title="var">w</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 59, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="correct_program_compliant_semantics_compliant_semantics"><span class="id" title="lemma">correct_program_compliant_semantics_compliant_semantics</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">W</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:  <a class="idref" href="FreeSpec.Interface.html#Interface"><span class="id" title="definition">Interface</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:  <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:  <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>: <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>: <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">|=</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#execProgram"><span class="id" title="definition">execProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">|=</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#specification_derive"><span class="id" title="definition">specification_derive</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsig</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">sig</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">sig</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsig</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We now introduce the notion of so-called correct run, to reason about the
    execution of a correct program without the need to use a compliant
    semantics. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="correct_run"><span class="id" title="inductive">correct_run</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:    <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">W</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:    <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:    <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <span class="id" title="var">I</span> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="var">W</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="correct_run_pure"><span class="id" title="constructor">correct_run_pure</span></a> (<span class="id" title="var">x</span>: <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> (<a class="idref" href="FreeSpec.Program.html#Pure"><span class="id" title="constructor">Pure</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><br/>
| <a name="correct_run_compliant_request"><span class="id" title="constructor">correct_run_compliant_request</span></a> {<span class="id" title="var">B</span>:   <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">op</span>:  <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hop</span>: <a class="idref" href="FreeSpec.Specification.html#precondition"><span class="id" title="projection">precondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span>:   <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hx</span>:  <a class="idref" href="FreeSpec.Specification.html#postcondition"><span class="id" title="projection">postcondition</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>:   <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">y</span>:   <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w'</span>:  <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hf</span>:  <a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> (<a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>) (<a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="FreeSpec.Specification.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="FreeSpec.Specification.html#w'"><span class="id" title="variable">w'</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> (<a class="idref" href="FreeSpec.Program.html#Request"><span class="id" title="constructor">Request</span></a> <a class="idref" href="FreeSpec.Specification.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="FreeSpec.Specification.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="FreeSpec.Specification.html#w'"><span class="id" title="variable">w'</span></a>.<br/>

<br/>
</div>

<div class="doc">
That is, <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a></span> is a predicate which maps a program with a set of
    possible results, along with a set of possible resulting witness states. We
    can easily demonstrate that. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="compliant_semantics_gives_correct_run"><span class="id" title="lemma">compliant_semantics_gives_correct_run</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:     <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">W</span>:   <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:     <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:     <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:     <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hp</span>:    <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:   <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hsig</span>:  <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">|=</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#evalInstrumentedProgram"><span class="id" title="definition">evalInstrumentedProgram</span></a> (<a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FreeSpec.Specification.html#witnessInstrumentedProgram"><span class="id" title="definition">witnessInstrumentedProgram</span></a> (<a class="idref" href="FreeSpec.Specification.html#abstract_step"><span class="id" title="projection">abstract_step</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">sig</span> <span class="id" title="var">Hsig</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span> <span class="id" title="var">Hsig</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">ssubst</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">ssubst</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsig</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">ssubst</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">ssubst</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hnext</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsig</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We show that this notion of <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a></span> allows us to reason
    about the correctness of a program constructed with
    <span class="inlinecode"><a class="idref" href="FreeSpec.Program.html#program_bind"><span class="id" title="definition">program_bind</span></a></span>, without the need to enumerate all the requests
    made by each subprograms. In other words, <span class="inlinecode"><a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a></span> enables
    modularity of proofs: once a program has been shown to be correct
    with respect to a given abstract specification, it is possible to
    reuse this proof when it is used to construct a larger one. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="correct_program_correct_run_correct_bind"><span class="id" title="lemma">correct_program_correct_run_correct_bind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:         <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">W</span>:     <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:         <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:         <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:         <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>:         <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">w'</span>, <a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="FreeSpec.Specification.html#w'"><span class="id" title="variable">w'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="FreeSpec.Specification.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w'"><span class="id" title="variable">w'</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Program.html#program_bind"><span class="id" title="definition">program_bind</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">f</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">g</span> <span class="id" title="var">w</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hg</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">ssubst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">Hreq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hpost</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hnext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">w'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hrun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="FreeSpec.Specification.html#correct_run_compliant_request"><span class="id" title="constructor">correct_run_compliant_request</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:=<span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma is used in the <span class="inlinecode"><span class="id" title="var">prove_program</span></span> tactics (in
    the <span class="inlinecode"><span class="id" title="var">FreeSpec.Tactics</span></span> module). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="correct_program_with_compliant_semantics_correct_run"><span class="id" title="lemma">correct_program_with_compliant_semantics_correct_run</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">I</span>:    <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">W</span>:  <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>:    <a class="idref" href="FreeSpec.Specification.html#Specification"><span class="id" title="record">Specification</span></a> <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">w</span>:    <a class="idref" href="FreeSpec.Specification.html#W"><span class="id" title="variable">W</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span>:    <a class="idref" href="FreeSpec.Program.html#Program"><span class="id" title="inductive">Program</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="FreeSpec.Specification.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sig</span>:  <a class="idref" href="FreeSpec.Semantics.html#Sem.t"><span class="id" title="inductive">Sem.t</span></a> <a class="idref" href="FreeSpec.Specification.html#I"><span class="id" title="variable">I</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#1bfa67b3c9c3752011eaeae2630646a3"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">|=</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">[</span></a><a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="FreeSpec.Specification.html#f733d0314146ee3607e3a19df90b9e1f"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Specification.html#correct_run"><span class="id" title="inductive">correct_run</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> (<a class="idref" href="FreeSpec.Program.html#evalProgram"><span class="id" title="definition">evalProgram</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a>) (<a class="idref" href="FreeSpec.Specification.html#specification_derive"><span class="id" title="definition">specification_derive</span></a> <a class="idref" href="FreeSpec.Specification.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="FreeSpec.Specification.html#sig"><span class="id" title="variable">sig</span></a> <a class="idref" href="FreeSpec.Specification.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Specification.html#w"><span class="id" title="variable">w</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">sig</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">ssubst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">Hreq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hprom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hreq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hreq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnext</span> |]; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsig</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>